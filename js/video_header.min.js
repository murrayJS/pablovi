var HeaderVideo=function(t,e){var i={container:t(".header-video"),header:t(".header-video--media"),videoTrigger:t("#video-trigger"),videoCloseTrigger:t("#video-close-trigger"),teaserVideo:t("#teaser-video"),autoPlayVideo:!1},n=function(e){i=t.extend(i,e),o(),s(),r(),i.videoCloseTrigger.hide(),videoDetails.teaser&&a(),i.autoPlayVideo&&c()},o=function(){return videoDetails={id:i.header.attr("data-video-src"),teaser:i.header.attr("data-teaser-source"),provider:i.header.attr("data-provider").toLowerCase(),videoHeight:i.header.attr("data-video-height"),videoWidth:i.header.attr("data-video-width")},videoDetails},s=function(){i.container.data("aspectRatio",videoDetails.videoHeight/videoDetails.videoWidth),t(window).resize(function(){var e=t(window).width(),n=t(window).height();i.container.width(e).height(e*i.container.data("aspectRatio")),n<i.container.height()&&i.container.width(e).height(n)}).trigger("resize")},r=function(){i.videoTrigger.on("click",function(t){t.preventDefault(),c(),i.videoCloseTrigger.fadeIn()}),i.videoCloseTrigger.on("click",function(t){t.preventDefault(),h()})},a=function(){if(Modernizr.video&&!p()){var t=videoDetails.teaser,e='<video autoplay="true" loop="loop" muted id="teaser-video" class="teaser-video"><source src="'+t+'.mp4" type="video/mp4"><source src="'+t+'.ogv" type="video/ogg"></video>';i.container.append(e)}},l=function(){if("youtube"===videoDetails.provider)var t='<iframe id="video" src="http://www.youtube.com/embed/'+videoDetails.id+'?rel=0&amp;hd=1&autohide=1&showinfo=0&autoplay=1&enablejsapi=1&origin=*" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>';else if("vimeo"===videoDetails.provider)var t='<iframe id="video" src="http://player.vimeo.com/video/'+videoDetails.id+'?title=0&amp;byline=0&amp;portrait=0&amp;color=3d96d2&autoplay=1" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>';else if("html5"===videoDetails.provider)var t='<video autoplay="true" loop="loop" id="video"><source src="'+videoDetails.id+'.mp4" type="video/mp4"><source src="'+videoDetails.id+'.ogv" type="video/ogg"></video>';return t},c=function(){i.header.hide(),i.container.append(l()),d(),i.teaserVideo.hide()},h=function(){t("#video").remove(),i.teaserVideo.fadeIn(),u(),f()},d=function(){i.videoTrigger&&i.videoTrigger.fadeOut("slow")},u=function(){i.videoTrigger&&i.videoTrigger.fadeIn("slow")},f=function(){i.videoCloseTrigger.hide()},p=function(){return t(window).width()<900&&Modernizr.touch?!0:!1};return{init:n}}(jQuery,document);